<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>3rd Month</title>
	<style>
		html, body {
			height: 100%;
			margin: 0;
			padding: 0;
		}
		body {
			min-height: 100vh;
			min-width: 100vw;
			background: url('ASSETS/BG PHOTO.jpg') no-repeat center center fixed;
			background-size: cover;
			transition: background-image 1.5s cubic-bezier(.4,0,.2,1);
		}
		.bg-fade {
			position: fixed;
			top: 0; left: 0; right: 0; bottom: 0;
			width: 100vw;
			height: 100vh;
			z-index: -1;
			background: url('ASSETS/BG GIF.gif') no-repeat center center fixed;
			background-size: cover;
			opacity: 0;
			pointer-events: none;
			animation: fadeInBG 1.5s ease forwards;
		}
		@keyframes fadeInBG {
			from { opacity: 0; }
			to { opacity: 1; }
		}
		.center-container {
			display: flex;
			justify-content: center;
			align-items: center;
			height: 100vh;
		}
		.center-btn {
			padding: 0.5em 1em;
			font-size: 1.0em;
			border: none;
			border-radius: 8px;
			background: #fff;
			color: #d72660;
			cursor: pointer;
			box-shadow: 0 2px 8px rgba(0,0,0,0.1);
			transition: background 0.2s, color 0.2s;
		}
		.center-btn:hover {
			background: #d72660;
			color: #fff;
		}
		.center-content {
			display: flex;
			justify-content: center;
			align-items: center;
			height: 100vh;
		}
		.transparent-container {
			background: rgba(255, 255, 255, 0.25);
			border-radius: 24px;
			box-shadow: 0 4px 24px rgba(0,0,0,0.15);
			padding: 2.5em 2em 2em 2em;
			max-width: 540px;
			color: #d72660;
			font-size: 1.15em;
			font-family: 'Segoe UI', Arial, sans-serif;
			text-align: left;
			backdrop-filter: blur(6px);
			border: 1.5px solid rgba(255,255,255,0.35);
		}
		.transparent-container h2 {
			margin-top: 0;
			margin-bottom: 1em;
			font-size: 1.6em;
			color: #d72660;
			text-align: center;
			text-shadow: 0 2px 8px rgba(255,255,255,0.2);
		}
		.typewriter-fade {
			opacity: 0;
			transition: opacity 0.7s cubic-bezier(.4,0,.2,1);
		}
		.typewriter-fade.visible {
			opacity: 1;
		}
		.hidden { display: none !important; }
	/* Responsive styles for mobile */
	@media (max-width: 600px) {
		.center-container,
		.center-content {
			height: auto;
			min-height: 100vh;
			padding: 2em 0 1em 0;
		}
		.transparent-container {
			max-width: 95vw;
			padding: 1.2em 0.7em 1em 0.7em;
			font-size: 1em;
		}
		.transparent-container h2 {
			font-size: 1.15em;
		}
		.center-btn {
			font-size: 1em;
			padding: 0.7em 1.2em;
		}
		body {
			background-attachment: scroll;
		}
	}
	</style>
</head>
<body>
	<!-- Background music -->
	<audio id="bgMusic" src="ASSETS/YOU.mp3" autoplay loop hidden></audio>
	<div class="center-container" id="firstPage">
		<button class="center-btn" id="mainBtn">My Allie ♡</button>
	</div>
	<div class="center-content hidden" id="secondPage">
		<div class="transparent-container">
			<h2 id="typewriter-h2" class="typewriter-fade"></h2>
			<p id="typewriter-p1" class="typewriter-fade"></p>
			<p id="typewriter-p2" class="typewriter-fade"></p>
			<p id="typewriter-p3" class="typewriter-fade"></p>
			<p id="typewriter-p4" class="typewriter-fade"></p>
			<p id="typewriter-p5" class="typewriter-fade" style="text-align:center;font-size:1.3em;margin-top:1.5em;"></p>
			<div id="typewriter-btn-container" class="typewriter-fade" style="text-align:center; margin-top: 1.5em;"></div>
		</div>
	</div>
	<div class="center-content hidden" id="thirdPage">
	<div class="transparent-container">
		<h2 style="text-align:center;">Photo Collage</h2>
		<div style="display:grid;grid-template-columns:repeat(3,1fr);gap:10px;justify-items:center;">
			<img src="ASSETS/1.jpg" class="collage-img" alt="Photo 1">
			<img src="ASSETS/2.jpg" class="collage-img" alt="Photo 2">
			<img src="ASSETS/3.jpg" class="collage-img" alt="Photo 3">
			<img src="ASSETS/4.jpg" class="collage-img" alt="Photo 4">
			<img src="ASSETS/5.jpg" class="collage-img" alt="Photo 5">
			<img src="ASSETS/6.jpg" class="collage-img" alt="Photo 6">
			<img src="ASSETS/7.jpg" class="collage-img" alt="Photo 7">
			<img src="ASSETS/8.jpg" class="collage-img" alt="Photo 8">
			   <img src="ASSETS/9.jpg" class="collage-img" alt="Photo 9">
			  </div>
			  <div style="margin-top:2em; text-align:center; color:#d72660; font-size:1.1em;">
    <p style="margin-bottom:0.7em;">
        just like the song says,<br>
        You are the one who makes me happy<br>
        When everything else turned to grey<br>
        Yours is the voice that wakes me mornings<br>
        And sends me out into the day.
    </p>
    <p style="font-weight:bold; font-size:1.2em; margin-top:1em;">
        i love you so much my baby!
    </p>
</div>
			  <style>
			  .collage-img {
				  width: 95px;
				  height: 95px;
				  object-fit: cover;
				  border-radius: 10px;
				  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
				  cursor: pointer;
				  transition: transform 0.2s;
			  }
			  .collage-img:hover {
				  transform: scale(1.0);
				  z-index: 2;
			  }
			  /* Modal styles */
			  #imgModal {
				  display: none;
				  position: fixed;
				  z-index: 9999;
				  left: 0; top: 0; width: 5vw; height: 5vh;
				  background: rgba(0,0,0,0.7);
				  transition: background 0.2s;
				  display: flex;
				  justify-content: center;
				  align-items: center;
			  }
			  #imgModal:not(.open) { display: none; }
			  #imgModal.open { display: flex; }
			  #imgModal img {
				  max-width: 90vw;
				  max-height: 90vh;
				  border-radius: 18px;
				  box-shadow: 0 8px 32px rgba(0,0,0,0.25);
				  background: #fff;
				  animation: popIn 0.22s cubic-bezier(.4,0,.2,1);
				  display: block;
				  margin: auto;
			  }
			  @keyframes popIn {
				  from { transform: scale(0.7); opacity: 0; }
				  to { transform: scale(1); opacity: 1; }
			  }
			  </style>
			  <!-- Modal for enlarged image -->
			  <div id="imgModal"><img id="imgModalImg" src="" alt="Enlarged"></div>
		</div>
	</div>
</div>

	<script>
	// Try to resume music if browser blocks autoplay (especially on mobile)
	document.addEventListener('DOMContentLoaded', function() {
		var music = document.getElementById('bgMusic');
		if (music) {
			// Some browsers require user interaction to start audio
			function tryPlay() {
				music.play().catch(()=>{});
				document.removeEventListener('click', tryPlay);
				document.removeEventListener('touchstart', tryPlay);
			}
			document.addEventListener('click', tryPlay);
			document.addEventListener('touchstart', tryPlay);
		}
	});
	// Collage modal logic
	document.addEventListener('DOMContentLoaded', function() {
		const modal = document.getElementById('imgModal');
		const modalImg = document.getElementById('imgModalImg');
		function openModal(src) {
			modalImg.src = src;
			modal.classList.add('open');
		}
		function closeModal() {
			modal.classList.remove('open');
			setTimeout(() => { modalImg.src = ''; }, 200);
		}
		document.querySelectorAll('.collage-img').forEach(img => {
			img.addEventListener('click', function(e) {
				openModal(this.src);
			});
		});
		modal.addEventListener('click', function(e) {
			// Only close if background or image is clicked
			closeModal();
		});
	});
		const mainBtn = document.getElementById('mainBtn');
		const firstPage = document.getElementById('firstPage');
		const secondPage = document.getElementById('secondPage');
		let bgFadeDiv;
		let typewriterActive = false;
		let typewriterTimeouts = [];
		let typewriterFinished = false;
		mainBtn.onclick = function() {
                // Hide first, show second
                firstPage.classList.add('hidden');
                secondPage.classList.remove('hidden');
                // Add fade-in GIF background
                if (!bgFadeDiv) {
                    bgFadeDiv = document.createElement('div');
                    bgFadeDiv.className = 'bg-fade';
                    document.body.appendChild(bgFadeDiv);
                    setTimeout(() => {
                        document.body.style.backgroundImage = "url('ASSETS/BG GIF.gif')";
                        bgFadeDiv.remove();
                    }, 1500);
                }
                // Start typewriter effect
                typewriterActive = true;
                typewriterFinished = false;
                typeWriterAll();
            };

            // Double click to skip typewriter and show all instantly
            document.addEventListener('dblclick', function() {
                if (!typewriterActive || typewriterFinished) return;
                // Cancel all pending timeouts
                typewriterTimeouts.forEach(clearTimeout);
                typewriterTimeouts = [];
                // Instantly show all text/buttons
                for (const d of typewriterData) {
                    const el = document.getElementById(d.id);
                    if (el) {
                        if (d.text.startsWith('<button')) {
                            el.innerHTML = d.text;
                        } else {
                            el.innerHTML = d.text;
                        }
                    }
                }
                typewriterActive = false;
                typewriterFinished = true;
            });

            // Typewriter effect for multiple elements
            const typewriterData = [
                {
                    id: 'typewriter-h2',
                    text: 'Happy 3rd Monthsary, my love!'
                },
                {
                    id: 'typewriter-p1',
                    text: 'I can’t believe it’s already been three months since we started this journey together. Every day with you feels so special, and I’m truly thankful for all the love, care, and happiness you’ve given me. These three months may seem short, but to me, they mean so much because they’ve been filled with memories with you.'
                },
                {
                    id: 'typewriter-p2',
                    text: 'I’ve realized that every fight we have only makes our relationship stronger. It’s during those times that I get to know you more deeply and understand you better. Even when things get tough, we always find our way back to each other, and that makes me love you even more.'
                },
                {
                    id: 'typewriter-p3',
                    text: 'I also promise to be more clear and transparent with my feelings, and I promise to follow you always. Mwa!'
                },
                {
                    id: 'typewriter-p4',
                    text: 'Thank you for being by my side and for making my days brighter. I’m so excited for all the months and years ahead of us!'
                },
                {
                    id: 'typewriter-p5',
                    text: 'I love you so much, today and always. ❤️'
                },
                {
                    id: 'typewriter-btn-container',
                    text: '<button class="center-btn" id="extraBtn">open me baby!</button>'
			}
		];

		function typeWriterAll() {
			let i = 0;
			function next() {
				if (!typewriterActive) return;
				if (i < typewriterData.length) {
					const el = document.getElementById(typewriterData[i].id);
					if (el) {
						el.classList.remove('visible');
					}
					typeWriter(typewriterData[i].id, typewriterData[i].text, 0, () => {
						const el2 = document.getElementById(typewriterData[i].id);
						if (el2) {
							el2.classList.add('visible');
						}
						i++;
						next();
					});
				} else {
					typewriterActive = false;
					typewriterFinished = true;
				}
			}
			next();
		}

		function typeWriter(elementId, text, idx, callback) {
			const el = document.getElementById(elementId);
			if (!el) return;
			// If the text is HTML (for the button), just insert it
			if (text.startsWith('<button')) {
				el.innerHTML = text;
				el.classList.add('visible');
				// Add event listener for the third page transition
				if (elementId === 'typewriter-btn-container') {
					setTimeout(() => {
						const btn = document.getElementById('extraBtn');
						if (btn) {
							btn.onclick = showThirdPage;
						}
					}, 10);
				}
				const t = setTimeout(callback, 500);
				typewriterTimeouts.push(t);
				return;
			}
		// Always attach the event listener in case of skip
		function showThirdPage() {
			document.getElementById('secondPage').classList.add('hidden');
			document.getElementById('thirdPage').classList.remove('hidden');
		}
		document.addEventListener('click', function() {
			const btn = document.getElementById('extraBtn');
			if (btn && !btn.onclick) {
				btn.onclick = showThirdPage;
			}
		});
			if (idx <= text.length && typewriterActive) {
				el.innerHTML = text.substring(0, idx) + '<span style="border-right:2px solid #d72660"></span>';
				el.classList.remove('visible');
				const t = setTimeout(() => typeWriter(elementId, text, idx + 1, callback), 45 + Math.random() * 40);
				typewriterTimeouts.push(t);
			} else {
				el.innerHTML = text;
				el.classList.add('visible');
				const t = setTimeout(callback, 700);
				typewriterTimeouts.push(t);
			}
		}
	</script>
</body>
</html>